<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kartka Urodzinowa â€” Kliknij, by otworzyÄ‡</title>
  <meta name="description" content="OtwierajÄ…ca siÄ™ kartka urodzinowa â€” kliknij, aby usÅ‚yszeÄ‡ muzykÄ™ i zobaczyÄ‡ confetti" />
  <style>
    :root{
      --bg: linear-gradient(135deg,#fff8fb 0%,#fffefc 100%);
      --card-width: 720px;
      --card-height: 480px;
      --accent: #ff6b8a;
      --paper: #fffefc;
      --shadow: rgba(18,18,18,0.12);
      --pink: #ff66b3;
    }

    html,body{height:100%;}
    body{
      margin:0;
      display:grid;
      place-items:center;
      background:var(--bg);
      font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:24px;
      color:#111;
    }

    .stage{
      perspective:1200px;
      width:calc(var(--card-width) + 40px);
      height:calc(var(--card-height) + 40px);
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .card-wrap{
      width:var(--card-width);
      height:var(--card-height);
      position:relative;
      transform-style:preserve-3d;
      transition:transform 900ms cubic-bezier(.22,.9,.16,1);
      transform-origin:left center;
      box-shadow: 0 18px 40px var(--shadow);
      border-radius:14px;
      background:linear-gradient(180deg,#fff,#fff8f6);
      overflow:visible;
    }

    /* Slight perspective when open */
    .card-wrap.open{ transform: rotateY(-14deg) translateZ(0); }

    .panel{
      position:absolute;
      top:0;
      left:0;
      width:50%;
      height:100%;
      overflow:hidden;
      backface-visibility:hidden;
      transform-style:preserve-3d;
      border-radius:12px;
    }

    /* FRONT: okÅ‚adka (po lewej) */
    .panel.front{
      left:0;
      width:50%;
      z-index:3; /* nad back */
      transform-origin:left center;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:0;
      box-sizing:border-box;
      border-right:1px solid rgba(0,0,0,0.03);
      background:#fff;
      position:absolute;
      top:0;
      height:100%;
    }

    .cover-img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    /* Fallback content (jeÅ›li brak cover.jpg) */
    .front-fallback{
      display:none;
      width:100%;
      height:100%;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding:20px;
      box-sizing:border-box;
      background:linear-gradient(180deg,#fff,#ffeef6);
      color:#6b2b4a;
      font-weight:700;
      font-size:20px;
    }

    /* FLAP (prawa poÅ‚owa, obraca siÄ™) */
    .flap{
      position:absolute;
      top:0;
      left:50%;
      width:50%;
      height:100%;
      transform-origin:left center;
      transform: rotateY(0deg);
      transition: transform 900ms cubic-bezier(.22,.9,.16,1);
      z-index:2; /* nad back, pod front (front jest na lewej poÅ‚owie) */
      border-radius:0 12px 12px 0;
      overflow:hidden;
      box-shadow: inset -6px 0 12px rgba(0,0,0,0.02);
      background: linear-gradient(0deg,#fff8f1,#fffefc);
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* flap obraca siÄ™ przy otwarciu */
    .card-wrap.open .flap{ transform: rotateY(-180deg); }

    /* BACK - poczÄ…tkowo prawa poÅ‚owa, pod flapem */
    .panel.back{
      left:50%;
      width:50%;
      z-index:1;
      background:linear-gradient(180deg,#fffefc,#fff8f1);
      padding:28px;
      box-sizing:border-box;
      border-radius:0 12px 12px 0;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-direction:column;

      transition: left 900ms cubic-bezier(.22,.9,.16,1), width 900ms cubic-bezier(.22,.9,.16,1), padding 900ms;
      overflow:hidden;
    }

    /* po otwarciu: back rozszerza siÄ™ nad flap */
    .card-wrap.open .panel.back{
      left: 0;
      width: 100%;
      z-index: 5;
      padding: 36px;
    }

    .title{font-size:20px;font-weight:700;margin:0 0 8px 0;color:#2b1b3a}
    .subtitle{font-size:13px;color:#6b586e;margin:0}

    .greeting{
      font-size:16px;
      line-height:1.3;
      text-align:left;
      max-width:none;
      color:var(--pink);
      font-family:'Comic Sans MS','Comic Sans',cursive, sans-serif;
      font-weight:700;
      overflow-wrap:break-word;
      white-space:pre-wrap; /* zachowaj nowe linie w tekÅ›cie */
    }

    .controls{position:absolute;right:12px;bottom:12px;display:flex;gap:8px}
    .btn{background:transparent;border:1px solid rgba(0,0,0,0.08);padding:8px 12px;border-radius:8px;font-size:13px;cursor:pointer}
    .btn.primary{background:var(--accent);color:white;border:none}

    .mute{position:absolute;left:12px;bottom:12px;border-radius:999px;padding:8px 10px;border:1px solid rgba(0,0,0,0.06);background:rgba(255,255,255,0.9);cursor:pointer}

    .confetti { position:absolute; inset:0; pointer-events:none; z-index:6; overflow:visible; }
    .confetti i{ position:absolute; display:block; width:10px; height:14px; opacity:0; transform-origin:center; transform: translate3d(0,0,0) rotate(0deg); }

    @media (max-width:760px){
      :root{--card-width:360px;--card-height:480px}
      .greeting{font-size:14px}
    }

    @media (max-width:560px){
      :root{--card-width:320px;--card-height:420px}
      .greeting{font-size:14px}
    }

    .hint{position:absolute;top:-48px;opacity:0.95;font-size:13px;color:#3b2b3a}
  </style>
</head>
<body>

  <!--
    Edycja:
    - cover.jpg -> zamieÅ„ plik w repo; jeÅ›li ma innÄ… nazwÄ™, zmieÅ„ src poniÅ¼ej.
    - party.mp3 -> jeÅ›li chcesz dÅºwiÄ™k, wgraj plik mp3 i nadaj tÄ™ nazwÄ™ lub zmieÅ„ src w elemencie <audio>.
    - Å»yczenia: edytuj zawartoÅ›Ä‡ elementu z id="greetingText".
  -->

  <div class="stage">
    <div class="card-wrap" id="card" role="button" tabindex="0" aria-label="Kliknij, aby otworzyÄ‡ kartkÄ™">

      <!-- FRONT: okÅ‚adka (z lewej) -->
      <div class="panel front" aria-hidden="false">
        <img src="cover.jpg" alt="PrzÃ³d kartki" class="cover-img" id="coverImg">
        <div class="front-fallback" id="frontFallback" aria-hidden="true">
          <div>
            <div style="font-size:22px;margin-bottom:8px;">Wszystkiego najlepszego!</div>
            <div style="font-size:13px;color:#7a6576">Kliknij, aby otworzyÄ‡</div>
          </div>
        </div>
      </div>

      <!-- FLAP: napis zachÄ™cajÄ…cy (prawa poÅ‚owa) -->
      <div class="flap" aria-hidden="false">
        <div style="text-align:center;transform:translateZ(20px);padding:18px;">
          <p style="margin:0;font-weight:700;color:#6b2b4a; font-size:24px;">ğŸ‰29ğŸ‰</p>
          <p style="margin-top:6px;font-size:12px;color:#7a6576">Klik pyk</p>
        </div>
      </div>

      <!-- BACK: treÅ›Ä‡ kartki (prawa poÅ‚owa, ukryta pod flapem aÅ¼ do otwarcia) -->
      <div class="panel back" aria-hidden="true">
        <div>
          <!-- long text - zachowuje nowe linie dziÄ™ki white-space: pre-wrap -->
          <p class="greeting" id="greetingText">
Dear John,

dzisiaj miesiÄ…ca dziesiÄ…tego dzieÅ„ dziewiÄ…ty, a nam do zobaczenia zostaÅ‚o dni osiem! ZwÄ…c inaczej: twoje urodziny ğŸ‚ Ale jak juÅ¼ zaczÄ™Å‚am takim odliczaniem, to tylko wspomnÄ™, Å¼e dawno nie czekaÅ‚am na nic tak, jak na twÃ³j przyjazd (przylot?) i cieszÄ™ siÄ™ jak kiedyÅ› w adwent:) ğŸŒŸ A cieszyÄ‡ siÄ™ mam z czego, gdyÅ¼ jesteÅ› naprawdÄ™ niezwykÅ‚ym czÅ‚owiekiem i myÅ›lÄ™ Å¼e highlightem dnia kaÅ¼dego, kto ciÄ™ spotyka, a dla mnie highlightem co najmniej roku!
Å»yczÄ™ ci aby w twoim Å¼yciu zawsze byÅ‚o co najmniej ğŸ˜¬ğŸ‘, a najlepiej to ğŸ˜ğŸ‘ oraz Å¼ebyÅ› byÅ‚ szczÄ™Å›liwy z tego co robisz i Å¼yÅ‚ jak najmilej, bo zdecydowanie na to zasÅ‚ugujeszğŸˆ

ReasumujÄ…c wszystkie aspekty kwintesencji tematu, dochodzÄ™ do fundamentalnej konkluzji: jesteÅ› bardzo spoko i Å¼yczÄ™ ci wszystkiego co najlepsze!

~ ZofieÅ„ka ğŸ§¡

PS. Nie myÅ›l Å¼e zapomniaÅ‚am, oczywiÅ›cie Å¼e sÅ‚omki teÅ¼ wysyÅ‚am (nawet dosÅ‚ownie!). ProszÄ™ odebraÄ‡ do jutra 6:26 kod: 361725 w (mam nadziejÄ™) najbliÅ¼szym ci paczkomacie WAW101A. Ostatni raz sto lat!!
          </p>
        </div>
      </div>

      <!-- Confetti root -->
      <div class="confetti" id="confetti" aria-hidden="true"></div>

      <!-- Audio (opcjonalne): wgraj party.mp3 lub zmieÅ„ nazwÄ™ w src -->
      <audio id="bgAudio" src="party.mp3" preload="auto" loop playsinline></audio>

      <!-- Mute/unmute -->
      <button class="mute" id="muteBtn" aria-label="Wycisz muzykÄ™">ğŸ”Š</button>

    </div>
  </div>

  <script>
    const card = document.getElementById('card');
    const confettiRoot = document.getElementById('confetti');
    const audio = document.getElementById('bgAudio');
    const muteBtn = document.getElementById('muteBtn');
    const coverImg = document.getElementById('coverImg');
    const frontFallback = document.getElementById('frontFallback');
    let isMuted = false;

    // Fallback jeÅ›li brak cover.jpg - pokaÅ¼ Å‚adny napis zamiast pustego obrazu
    coverImg.addEventListener('error', ()=>{
      coverImg.style.display = 'none';
      frontFallback.style.display = 'flex';
      frontFallback.setAttribute('aria-hidden','false');
    });

    muteBtn.addEventListener('click', (e)=>{
      e.stopPropagation();
      isMuted = !isMuted;
      audio.muted = isMuted;
      muteBtn.textContent = isMuted ? 'ğŸ”ˆ' : 'ğŸ”Š';
    });

    function createConfetti(){
      confettiRoot.innerHTML = '';
      const colors = ['#FF6B8A','#FFD166','#6BF1C9','#6B8CFF','#FFB2E6','#FFF66B'];
      for(let i=0;i<28;i++){
        const el = document.createElement('i');
        const left = 40 + Math.random()*( (parseInt(getComputedStyle(card).width) || 720) - 80 );
        const top = 20 + Math.random()*220;
        el.style.left = left + 'px';
        el.style.top = top + 'px';
        const c = colors[Math.floor(Math.random()*colors.length)];
        el.style.background = c;
        el.style.borderRadius = (Math.random()>0.5?'2px':'50%');
        const dur = 900 + Math.random()*900;
        el.style.transition = `transform ${dur}ms cubic-bezier(.16,.9,.3,1), opacity ${dur}ms linear`;
        confettiRoot.appendChild(el);
        setTimeout(()=>{
          const dx = (Math.random()-0.5)*700;
          const dy = -120 - Math.random()*360;
          const rot = (Math.random()-0.5)*1080;
          el.style.transform = `translate3d(${dx}px, ${dy}px, 0) rotate(${rot}deg) scale(${0.8+Math.random()*0.6})`;
          el.style.opacity = '1';
        }, 40 + i*20);
      }
      setTimeout(()=>{ confettiRoot.innerHTML = ''; }, 3200);
    }

    function openCard(){
      if(card.classList.contains('open')) return;
      card.classList.add('open');
      // Accessibility states
      const flap = card.querySelector('.flap');
      const back = card.querySelector('.panel.back');
      flap.setAttribute('aria-hidden','true');
      back.setAttribute('aria-hidden','false');
      // play music (user gesture)
      if(audio){
        audio.muted = isMuted;
        const playPromise = audio.play();
        if(playPromise !== undefined){
          playPromise.catch(()=>{ /* autoplay may be blocked in some browsers */ });
        }
      }
      createConfetti();
    }

    function closeCard(){
      if(!card.classList.contains('open')) return;
      card.classList.remove('open');
      const flap = card.querySelector('.flap');
      const back = card.querySelector('.panel.back');
      flap.setAttribute('aria-hidden','false');
      back.setAttribute('aria-hidden','true');
      if(audio) audio.pause();
    }

    // toggle on click / keyboard controls
    card.addEventListener('click', ()=>{ if(card.classList.contains('open')) closeCard(); else openCard(); });
    card.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); card.click(); } if(e.key === 'Escape') closeCard(); });

    // hide mute button if no audio file present
    audio.addEventListener('error', ()=>{ muteBtn.style.display = 'none'; });

    // Ensure initial aria states
    document.querySelector('.panel.back').setAttribute('aria-hidden','true');
    document.querySelector('.flap').setAttribute('aria-hidden','false');

    // (no auto-open) â€” user must click to open so music/animation start from user action
  </script>

</body>
</html>
